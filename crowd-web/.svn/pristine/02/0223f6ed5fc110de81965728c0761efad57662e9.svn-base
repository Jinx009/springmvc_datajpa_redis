package com.code.listener;


import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.http.HttpSessionAttributeListener;
import javax.servlet.http.HttpSessionBindingEvent;



import com.code.model.util.GlobalModel;
import com.code.service.home.HomeConfigService;
import com.code.service.sys.WebTemplateService;
import com.code.tool.BeanUtil;



/**
 * 全局监听器
 * @author Jinx
 *
 */
public class WebListener  implements ServletContextListener, HttpSessionAttributeListener {


	public void contextDestroyed(ServletContextEvent event) {

	}

	/**
	 *存放容器全局变量
	 */
	public void contextInitialized(ServletContextEvent event) {
		//手动注入dao或者Service
		HomeConfigService homeConfigService =(HomeConfigService)BeanUtil.getBean("homeConfigService");
		GlobalModel.HOMECONFIGLIST = homeConfigService.findAll();
		WebTemplateService webTemplateService = (WebTemplateService)BeanUtil.getBean("webTemplateService");
		GlobalModel.WEBTEMPLATELIST = webTemplateService.getUse(1);
		
	}


	public void attributeAdded(HttpSessionBindingEvent event) {
	}

	public void attributeRemoved(HttpSessionBindingEvent event) {
	}

	public void attributeReplaced(HttpSessionBindingEvent event) {

	}

	public void checkVersion() {
	}
}
