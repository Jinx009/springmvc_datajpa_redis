package com.code.controller.pro;



import javax.servlet.ServletContext;
import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.code.entity.user.User;
import com.code.redis.RedisService;
import com.code.service.log.NoticeLogService;
import com.code.tool.ip.IPUtil;

@Controller
@RequestMapping("pro")
public class ProjectPageController {

	@Autowired
	private RedisService redisService;
	@Autowired
	private NoticeLogService noticeLogService;
	
	/**
	 * 项目方首页
	 * @return
	 */
	@RequestMapping(value = "index",method=RequestMethod.GET)
	public String index(HttpServletRequest request){
		ServletContext servletContext = request.getServletContext();
		String testValue = (String) servletContext.getAttribute("test");
		System.out.println(redisService.addUser(new User()));
		return "view/pro/index";
	}
	
	/**
	 * 新建项目
	 * @return
	 */
	@RequestMapping(value = "create",method=RequestMethod.GET)
	@ResponseBody
	public User create(HttpServletRequest request){
		System.out.println(IPUtil.getRemortIP(request));
		User value = redisService.getUser(request.getParameter("key"));
		return value;
	}
}
